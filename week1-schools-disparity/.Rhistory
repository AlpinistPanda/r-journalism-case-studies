test_results <- read.csv("https://stacks.stanford.edu/file/druid:db586ns4974/district%20means%20grade%20equivalent%20std%20(gs)%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", stringsAsFactors=F)
View(test_results)
covariates <- read.csv("https://stacks.stanford.edu/file/druid:db586ns4974/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", stringsAsFactors=F)
library(readxl)
tr_dictionary <- read_excel("https://stacks.stanford.edu/file/druid:db586ns4974/codebook_achievement_v1point1.xlsx", sheet=1)
tr_dictionary <- read_excel("https://stacks.stanford.edu/file/druid:db586ns4974/codebook_achievement_v1point1.xlsx", sheet=1)
if(!exists("data/codebook_achievement_v1point1.xlsx")) {
download.file("https://stacks.stanford.edu/file/druid:db586ns4974/codebook_achievement_v1point1.xlsx", "data/codebook_achievement_v1point1.xlsx")
}
tr_dictionary <- read_excel("data/codebook_achievement_v1point1.xlsx", sheet=1)
if(!exists("data/district%20means%20grade%20equivalent%20std%20(gs)%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")) {
download.file("https://stacks.stanford.edu/file/druid:db586ns4974/district%20means%20grade%20equivalent%20std%20(gs)%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", "data/district%20means%20grade%20equivalent%20std%20(gs)%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")
}
test_results <- read.csv("data/district%20means%20grade%20equivalent%20std%20(gs)%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", stringsAsFactors=F)
if(!exists("data/district%20means%20grade%20equivalent%20std%20(gs)%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")) {
download.file("https://stacks.stanford.edu/file/druid:db586ns4974/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", "data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv")
}
covariates <- read.csv("data/district%20means%20grade%20equivalent%20std%20(gs)%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", stringsAsFactors=F)
if(!exists("data/codebook_achievement_v1point1.xlsx")) {
download.file("https://stacks.stanford.edu/file/druid:db586ns4974/codebook_achievement_v1point1.xlsx", "data/codebook_achievement_v1point1.xlsx")
}
tr_dictionary <- read_excel("data/codebook_achievement_v1point1.xlsx", sheet=1)
if(!exists("data/codebook_covariates_v1_1.xlsx")) {
download.file("https://stacks.stanford.edu/file/druid:db586ns4974/codebook_covariates_v1_1.xlsx", "data/codebook_covariates_v1_1.xlsx")
}
cv_dictionary <- read_excel("data/codebook_covariates_v1_1.xlsx", sheet=1)
View(cv_dictionary)
View(test_results)
View(covariates)
View(covariates)
View(covariates)
View(test_results)
if(!exists("data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv")) {
download.file("https://stacks.stanford.edu/file/druid:db586ns4974/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", "data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv")
}
covariates <- read.csv("data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", stringsAsFactors=F)
str(covariates)
str(test_results)
View(cv_dictionary)
View(tr_dictionary)
head(tr_dictionary, 10)
View(tr_dictionary)
head(tr_dictionary, 10)
tr_dictionary <- read_excel("data/codebook_achievement_v1point1.xlsx", sheet=11)
tr_dictionary <- read_excel("data/codebook_achievement_v1point1.xlsx", sheet=11)
head(tr_dictionary, 10)
View(tr_dictionary)
tr_dictionary <- subset(tr_dictionary, !is.na(tr_dictionary[,1]))
head(tr_dictionary, 10)
View(tr_dictionary)
View(cv_dictionary)
View(covariates)
head(str(covariates, 10))
View(test_results)
View(test_results)
state_gap_summary <- test_results $>$
state_gap_summary <- test_results %>%
group_by(stateabb) %>%
summarise(average_gap = mean(gsmean_pool)) %>%
arrange(average_gap)
library(dplyr)
state_gap_summary <- test_results %>%
group_by(stateabb) %>%
summarise(average_gap = mean(gsmean_pool)) %>%
arrange(average_gap)
head(state_gap_summary)
state_gap_summary <- test_results %>%
group_by(stateabb) %>%
summarise(average_gap = mean(gsmean_pool)) %>%
arrange(-average_gap)
head(state_gap_summary)
View(tr_dictionary)
View(test_results)
View(tr_dictionary)
View(test_results)
#if(!exists("data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")) {
#  download.file("https://stacks.stanford.edu/file/druid:db586ns4974/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", "data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")
#}
test_gap <- read.csv("data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", stringsAsFactors=F)
if(!exists("data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")) {
download.file("https://stacks.stanford.edu/file/druid:db586ns4974/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", "data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")
}
test_gap <- read.csv("data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", stringsAsFactors=F)
View(tr_dictionary)
View(test_results)
View(test_gap)
state_gap_summary <- test_results %>%
group_by(stateabb) %>%
summarise(average_gap = mean(gapblk)) %>%
arrange(-average_gap)
state_gap_summary <- test_gap %>%
group_by(stateabb) %>%
summarise(average_gap = mean(gapblk)) %>%
arrange(-average_gap)
head(state_gap_summary)
library(DT)
test_gap <- read.csv("data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", stringsAsFactors=F)
tr_dictionary <- read_excel("data/codebook_achievement_v1point1.xlsx", sheet=11)
covariates <- read.csv("data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", stringsAsFactors=F)
covariates <- read.csv("data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", stringsAsFactors=F)
cv_dictionary <- read.csv("data/codebook_covariates_v1_1.xlsx", stringsAsFactors=F)
tr_dictionary <- read_excel("data/codebook_achievement_v1point1.xlsx", sheet=11)
View(tr_dictionary)
#if(!exists("data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")) {
#  download.file("https://stacks.stanford.edu/file/druid:db586ns4974/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", "data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv")
#}
test_gaps <- read.csv("data/district%20gaps%20(pooled%20year,%20grade%20and%20sub)_v1_1.csv", stringsAsFactors=F)
#if(!exists("data/codebook_achievement_v1point1.xlsx")) {
#  download.file("https://stacks.stanford.edu/file/druid:db586ns4974/codebook_achievement_v1point1.xlsx", "data/codebook_achievement_v1point1.xlsx")
#}
tr_dictionary <- read_excel("data/codebook_achievement_v1point1.xlsx", sheet=11)
#if(!exists("data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv")) {
#  download.file("https://stacks.stanford.edu/file/druid:db586ns4974/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", "data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv")
#}
covariates <- read.csv("data/district%20covariates%20from%20acs%20and%20ccd%20master_v1_1.csv", stringsAsFactors=F)
#if(!exists("data/codebook_covariates_v1_1.xlsx")) {
#  download.file("https://stacks.stanford.edu/file/druid:db586ns4974/codebook_covariates_v1_1.xlsx", "data/codebook_covariates_v1_1.xlsx")
#}
cv_dictionary <- read_excel("data/codebook_covariates_v1_1.xlsx", sheet=1)
View(cv_dictionary)
summary_all <- left_join(cv_summary, state_gap_summary)
state_gap_summary <- test_gaps %>%
group_by(stateabb) %>%
summarise(average_gap = mean(gapblk, na.rm=T)) %>%
arrange(-average_gap)
cv_summary <- covariates %>%
group_by(stateabb) %>%
summarise(avg_income_gap=mean(incVblkwht, na.rm=T), avg_segregation_score=mean(hswhtblk, na.rm=T)) %>%
arrange(-avg_income_gap)
summary_all <- left_join(cv_summary, state_gap_summary)
ggplot(summary_all, aes(average_gap, avg_income_gap)) + geom_point()
library(ggplot2)
ggplot(summary_all, aes(average_gap, avg_income_gap)) + geom_point()
View(summary_all)
cor(summary_all$avg_income_gap, summary_all$average_gap, use="obs.total")
?cor
cor(summary_all$avg_income_gap, summary_all$average_gap, use="complete")
ggplot(summary_all, aes(average_gap, avg_segregation_score)) + geom_point()
cor(summary_all$avg_integration_score, summary_all$average_gap, use="complete")
cor(summary_all$avg_segregation_score, summary_all$average_gap, use="complete")
overall <- left_join(test_gaps, covariates)
overall <- left_join(test_gaps, covariates, by="leaid")
cor(overall$gapblk, overall$hswhtblk, use="complete")
cor(overall$gapblk, overall$incVblkwht, use="complete")
